--!strict
--[[
    LocalScript for a simple coordinate-based teleport UI.
    Place this script in StarterPlayerScripts.
]]

-- SERVICES
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

-- CONFIGURATION
local UI_SIZE = UDim2.new(0, 400, 0, 180)
local FONT_COLOR = Color3.fromRGB(220, 220, 220)
local BACKGROUND_COLOR = Color3.fromRGB(30, 30, 30)
local ACCENT_COLOR = Color3.fromRGB(85, 170, 255)
local BUTTON_COLOR = Color3.fromRGB(50, 50, 50)

-- Get the player's PlayerGui
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- UI Construction
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CoordinateTeleportUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UI_SIZE
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = BACKGROUND_COLOR
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 15)
corner.Parent = mainFrame

local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Size = UDim2.new(1, -20, 0, 30)
titleLabel.Position = UDim2.new(0, 10, 0, 10)
titleLabel.BackgroundColor3 = BACKGROUND_COLOR
titleLabel.BackgroundTransparency = 1
titleLabel.TextColor3 = FONT_COLOR
titleLabel.Text = "Coordinate Teleporter"
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = mainFrame

local getButton = Instance.new("TextButton")
getButton.Name = "GetPositionButton"
getButton.Size = UDim2.new(1, -20, 0, 30)
getButton.Position = UDim2.new(0, 10, 0, 50)
getButton.BackgroundColor3 = ACCENT_COLOR
getButton.TextColor3 = FONT_COLOR
getButton.Text = "Get Current Position"
getButton.Font = Enum.Font.SourceSansBold
getButton.TextScaled = true
getButton.Parent = mainFrame

local getCorner = Instance.new("UICorner")
getCorner.CornerRadius = UDim.new(0, 8)
getCorner.Parent = getButton

local positionBox = Instance.new("TextBox")
positionBox.Name = "PositionTextBox"
positionBox.Size = UDim2.new(1, -20, 0, 30)
positionBox.Position = UDim2.new(0, 10, 0, 90)
positionBox.BackgroundColor3 = BUTTON_COLOR
positionBox.TextColor3 = FONT_COLOR
positionBox.PlaceholderText = "Your coordinates will appear here..."
positionBox.Text = ""
positionBox.Font = Enum.Font.SourceSans
positionBox.TextScaled = true
positionBox.TextXAlignment = Enum.TextXAlignment.Left
positionBox.ClearTextOnFocus = false
positionBox.Parent = mainFrame

local copyLabel = Instance.new("TextLabel")
copyLabel.Name = "CopyLabel"
copyLabel.Size = UDim2.new(1, -20, 0, 15)
copyLabel.Position = UDim2.new(0, 10, 0, 125)
copyLabel.BackgroundTransparency = 1
copyLabel.TextColor3 = FONT_COLOR
copyLabel.Text = "Click the box above and press Ctrl+C to copy."
copyLabel.TextSize = 12
copyLabel.TextXAlignment = Enum.TextXAlignment.Left
copyLabel.Parent = mainFrame

local pasteBox = Instance.new("TextBox")
pasteBox.Name = "PasteTextBox"
pasteBox.Size = UDim2.new(1, -20, 0, 30)
pasteBox.Position = UDim2.new(0, 10, 0, 140)
pasteBox.BackgroundColor3 = BUTTON_COLOR
pasteBox.TextColor3 = FONT_COLOR
pasteBox.PlaceholderText = "Paste coordinates here and press Teleport..."
pasteBox.Text = ""
pasteBox.Font = Enum.Font.SourceSans
pasteBox.TextScaled = true
pasteBox.TextXAlignment = Enum.TextXAlignment.Left
pasteBox.ClearTextOnFocus = false
pasteBox.Parent = mainFrame

local teleportButton = Instance.new("TextButton")
teleportButton.Name = "TeleportButton"
teleportButton.Size = UDim2.new(1, -20, 0, 30)
teleportButton.Position = UDim2.new(0, 10, 0, 180)
teleportButton.BackgroundColor3 = ACCENT_COLOR
teleportButton.TextColor3 = FONT_COLOR
teleportButton.Text = "Teleport"
teleportButton.Font = Enum.Font.SourceSansBold
teleportButton.TextScaled = true
teleportButton.Parent = mainFrame

local teleCorner = Instance.new("UICorner")
teleCorner.CornerRadius = UDim.new(0, 8)
teleCorner.Parent = teleportButton

-- Dragging functionality (same as previous script)
local isDragging = false
local dragStartPos = Vector2.new(0, 0)
local dragStartFramePosition = UDim2.new(0, 0, 0, 0)
mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        isDragging = true
        dragStartPos = input.Position
        dragStartFramePosition = mainFrame.Position
    end
end)
UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        isDragging = false
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if isDragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStartPos
        local newPosition = dragStartFramePosition + UDim2.new(0, delta.X, 0, delta.Y)
        mainFrame.Position = newPosition
    end
end)

-- Main logic
getButton.MouseButton1Click:Connect(function()
    local myRootPart = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not myRootPart then return end
    
    -- Format CFrame into a readable string: X, Y, Z, R00, R01, etc.
    local cf = myRootPart.CFrame
    local x, y, z, r00, r01, r02, r10, r11, r12, r20, r21, r22 = cf:GetComponents()
    local cframeString = string.format("%.2f, %.2f, %.2f, %.2f, %.2f, %.2f, %.2f, %.2f, %.2f, %.2f, %.2f, %.2f", x, y, z, r00, r01, r02, r10, r11, r12, r20, r21, r22)
    positionBox.Text = cframeString
end)

teleportButton.MouseButton1Click:Connect(function()
    local myRootPart = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not myRootPart then return end
    
    local cframeString = pasteBox.Text
    local components = {}
    
    -- Split the string by commas and convert to numbers
    for component in string.gmatch(cframeString, "([%d%.%-]+)") do
        table.insert(components, tonumber(component))
    end
    
    -- Check if we have 12 valid components for a CFrame
    if #components == 12 then
        local newCFrame = CFrame.new(table.unpack(components))
        myRootPart.CFrame = newCFrame
    else
        pasteBox.Text = "Invalid coordinates format."
        wait(2)
        pasteBox.Text = "" -- Clear the error message
    end
end)
